{% extends 'base.html.twig' %}


{% block content %}

	<!-- Start header Area -->
	<section class="header-area header-twelve">
		{% for type, messages in app.flashes %}
			{% for message in messages %}
				<div class="alert alert-{{ type }}">{{ message }}</div>
			{% endfor %}
		{% endfor %}
		{#{% if not formSearch.vars.valid %}
			<ul class="alert alert-danger">
				#}{# on affiche en premier les erreurs globales (cas classiques) #}{#
				{% for error in formSearch.vars.errors %}
					<li>{{error.message}}</li>
				{% endfor %}
				#}{# ainsi que les erreurs concernant chaque champs #}{#
				{% for child in formSearch.children %}
					#}{# si le champ à des erreur #}{#
					{% if child.vars.errors is defined %}
						{% for error in child.vars.errors %}
							<li>{{ child.vars.label }} : {{ error.message }} </li> #}{# on ajoute le label du champ devant l'erreur pour plus de précisions. #}{#
						{% endfor %}
					{% endif %}
				{% endfor %}
			</ul>
		{% endif %}#}
	</section>

	<!-- div hero header -->
		<div id="hero">
			<div class="container pt-xxl-5">
				{{ render(controller('App\\Controller\\Front\\FrontController::search')) }}
			</div>
		</div>
	<!-- ./ End div hero header -->

	<!--======  Start Section Title Four ======-->
	<div class="section-title-four pt-5">
		<div class="container">
			<div class="content">
				<h2 class="fw-bold">Nos dernières nouvelles</h2>
				<h3 class="gray-bg">Blog</h3>
				<p>
					There are many variations of passages of Lorem Ipsum available,
					but the majority have suffered alteration in some form.
				</p>
			</div>
		</div>
	</div>
		<!-- container -->
	<!--====== End Section Title Four ======-->

	{#<div class="container mt-4">
		<div class="relative container mx-auto px-4 pb-16 xl:pb-24 xl:pt-14">
			<p class="text-4xl font-bold text-shadow mb-2 xl:text-6xl">Apprendre le développement</p>
			<p class="text-3xl font-bold text-shadow xl:text-4xl">facilement et simplement</p>
			<div class="mt-12">
				<a href="/inscription"
				   title="Ouvrir un compte" aria-label="Ouvrir un compte"
				   class="btn btn-gradient-red py-3"
				>
					Rejoins-nous !
				</a>
				<a href="/connexion"
				   title="Se connecter" aria-label="Se connecter"
				   class="btn btn-green py-3 ml-4 xl:hidden"
				>
					Connexion
				</a>
			</div>
		</div>
	</div>#}

	<!-- blog start -->
	<section class="blog-area pb-5">
		<div class="container">
			<div class="row justify-content-center">
				{% for article in articles %}
					<div class="col-lg-3 col-md-3 col-sm-10">
						<div class="single-blog blog-style-one">
							<div class="blog-image">
								<a href="{{ path('front_articles_show', {'slug': article.slug}) }}">
									{% for image in article.images %}
										<img class="card-img-top rounded-0" src="{{ asset('uploads/' ~ image.name) }}" alt="{{ article.title }}">
									{% endfor %}
								</a>
							</div>
							<div class="blog-content">
								<h5 class="blog-title">
									<a href="{{ path('front_articles_show', {'slug': article.slug}) }}">
										<h5 class="card-title">{{ article.title }}</h5>
									</a>
								</h5>
								<br>
								<span><i class="bi bi-calendar"></i> {{ article.createdAt|format_datetime('medium', locale="fr") }}</span>
								<span><i class="bi bi-chat-dots"></i>{{ article.commentaires|length }}</span>
								<span><i class="bi bi-heart-fill"></i>{{ article.favoris|length }}</span>
								<span><i class="bi bi-person"></i> {{ article.user.username }}</span>
							</div>
							<div class="txt-red">
								{% if app.user %}
									{% set isFavorite = false %}
									{% for favoris in article.favoris %}
										{% if favoris.id == app.user.id %}
											{% set isFavorite = true %}
										{% endif %}
									{% endfor %}
									{% if isFavorite %}
										<button type="button" data-id="{{ article.id }}"><i class="bi bi-hand-thumbs-up-fill"></i>
											</button>
									{% else %}
										<button type="button" data-id="{{ article.id }}"><i class="bi bi-hand-thumbs-up"></i>
										</button>
									{% endif %}

								{% endif %}
							</div>
						</div>
					</div>
				{% endfor %}
			</div>
		</div>
	</section>

	<!-- ./ End blog start -->
	<br>

	{#<div class="header d-none d-lg-block">
		<strong>Meet your friends</strong>
		<p>
			Lorem ipsum dolor sit amet, consectetur adipisicing elit. Error inventore laudantium obcaecati rem tenetur. At et fuga illo illum inventore maxime quas quia quo suscipit tempore. Aspernatur consequuntur maiores veritatis.
		</p>
	</div>#}

	<!-- Home Start -->
	{#<section class="py-5 text-center container">
		<div class="row py-lg-5">
			<div class="col-lg-6 col-md-8 mx-auto">
				<h1 class="fw-light">Bienvenue sur le blog Stay Online</h1>
				<code class="w3-codespan">('hello World!') !</code>
			</div>
		</div>
	</section>#}
	<!-- Home End -->

	<div class="navigation pagination justify-content-center my-4">
		{{ knp_pagination_render(articles) }}
	</div>

{% endblock %}
